{% extends "base.html" %}
{% block content %}
<div class="max-w-2xl mx-auto py-10 px-4 bg-white dark:bg-neutral-950 rounded shadow">
  <h1 class="text-2xl font-bold mb-6 text-[#111518] dark:text-white">User Management</h1>
  {% if error %}
    <div class="bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-200 px-4 py-3 rounded mb-4">{{ error }}</div>
  {% endif %}
  {% if success %}
    <div class="bg-green-100 dark:bg-green-900 border border-green-400 dark:border-green-700 text-green-700 dark:text-green-200 px-4 py-3 rounded mb-4">{{ success }}</div>
  {% endif %}
  {% if users and users|length > 0 %}
    <table class="min-w-full divide-y divide-gray-200 dark:divide-neutral-800 mb-6">
      <thead>
        <tr>
          <th class="px-4 py-2 text-left">Email</th>
          <th class="px-4 py-2 text-left">Role</th>
          <th class="px-4 py-2 text-left">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for email, role in users %}
        <tr class="border-t border-gray-200 dark:border-neutral-800">
          <td class="px-4 py-2">{{ email }}</td>
          <td class="px-4 py-2">{{ role }}</td>
          <td class="px-4 py-2">
            <form method="post" class="inline">
              <input type="hidden" name="email" value="{{ email }}">
              <select name="role" class="border rounded px-2 py-1 dark:bg-neutral-900 dark:text-white">
                <option value="renter" {% if role == 'renter' %}selected{% endif %}>Renter</option>
                <option value="admin" {% if role == 'admin' %}selected{% endif %}>Admin</option>
                <option value="high_admin" {% if role == 'high_admin' %}selected{% endif %}>High Admin</option>
              </select>
              <button class="bg-blue-600 dark:bg-blue-400 text-white dark:text-[#111518] px-3 py-1 rounded hover:bg-blue-700 dark:hover:bg-blue-600 ml-2 transition-colors">Update</button>
            </form>
            <form method="post" class="inline ml-2">
              <input type="hidden" name="email" value="{{ email }}">
              <input type="hidden" name="action" value="delete">
              <button class="bg-red-600 dark:bg-red-400 text-white dark:text-[#111518] px-3 py-1 rounded hover:bg-red-700 dark:hover:bg-red-600 transition-colors">Remove</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <div class="text-gray-500 dark:text-gray-400">No users found.</div>
  {% endif %}
</div>
{% endblock %}
